(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(15),u=t.n(r),o=t(16),i=t(2),l=function(e){var n=e.onClick;return c.a.createElement("div",null,c.a.createElement("button",{onClick:n},"Delete"))},f=function(e){var n=e.person,t=e.onClick;return c.a.createElement("li",{key:n.name},n.name," --- ",n.number,c.a.createElement(l,{onClick:t}))},m=function(e){var n=e.value,t=e.onChange;return c.a.createElement("div",null,"Filter: ",c.a.createElement("input",{value:n,onChange:t}))},s=function(e){var n=e.msg,t=e.style;return null===n?null:c.a.createElement("div",{className:t},n)},d=t(4),b=t.n(d),h="/api/persons",v=function(){return b.a.get(h).then((function(e){return e.data}))},E=function(e){return b.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},O=(t(39),function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),l=Object(i.a)(u,2),d=l[0],b=l[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),g=O[0],k=O[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),C=y[0],S=y[1],N=Object(a.useState)(""),D=Object(i.a)(N,2),P=D[0],x=D[1],J=Object(a.useState)(""),L=Object(i.a)(J,2),A=L[0],B=L[1];Object(a.useEffect)((function(){v().then((function(e){r(e)}))}),[]);var F=function(e,n){x(e),B(n),setTimeout((function(){x(null),B(null)}),5e3)};return c.a.createElement("div",null,c.a.createElement(s,{msg:P,style:A}),c.a.createElement("h2",null,"Search"),c.a.createElement(m,{value:C,onChange:function(e){S(e.target.value)}}),c.a.createElement("h2",null,"Phonebook"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:d,number:g,id:t.length+1};if(""!==n.name||""!==n.number)if(t.find((function(e){return e.name===n.name}))){if(window.confirm("".concat(n.name," is already in the phonebook!")+" Do you want to update the number?")){var a=t.find((function(e){return e.name===n.name})).id;p(a,n).then((function(e){!function(e,n){var t=Object(o.a)(e);t[n.id-1]=n,r(t)}(t,e),b(""),k(""),F("".concat(e.name," was successfully updated!"),"success")})).catch((function(e){F("".concat(n.name," couldn't be found in the database"),"error"),r(t.find((function(e){return e.id!==a})))}))}}else E(n).then((function(e){r(t.concat(e)),b(""),k(""),F("Person ".concat(e.name," was successfully added!"),"success")})).catch((function(e){F("Unexpected error!","error")}))}},c.a.createElement("div",null,"Name: ",c.a.createElement("input",{value:d,onChange:function(e){b(e.target.value)}})),c.a.createElement("div",null,"Number: ",c.a.createElement("input",{value:g,onChange:function(e){k(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))),c.a.createElement("h2",null,"Numbers"),c.a.createElement("ul",null,t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})).map((function(e){return c.a.createElement(f,{key:e.name,person:e,onClick:function(){return function(e,n){if(window.confirm("Are you sure want to delete? ".concat(n))){var a=t.find((function(n){return n.id===e}));j(a.id).then((function(n){r(t.filter((function(n){return n.id!==e})))})).catch((function(e){F("Person ".concat(n," was already removed from the server"),"error")}))}}(e.id,e.name)}})}))))});u.a.render(c.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.c20bd8be.chunk.js.map